<?php

namespace App\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\Routing\Annotation\Route;
use App\Entity\Campagne;
use App\Entity\Epandage;
use App\Entity\Parcelle;
use App\Entity\Exploitant;
use Doctrine\Persistence\ManagerRegistry;
use Symfony\Component\HttpFoundation\Request;

class DetailsExploitantController extends AbstractController
{
    #[Route('/details/exploitant/{idExploitant}', name: 'details_exploitant')]
    public function index(ManagerRegistry $doctrine,Request $request, int $idExploitant): Response
    {
        $infoExploitant = $doctrine->getRepository(Exploitant::Class)->find($idExploitant); 
        $listeParcelle = $doctrine->getRepository(Parcelle::Class)->findBy(array('proprietaire' => $idExploitant));
        return $this->render('details_exploitant/index.html.twig', [
           'infoExploitant'=>$infoExploitant,
           'listeParcelle'=>$listeParcelle
        ]);
    }
}
